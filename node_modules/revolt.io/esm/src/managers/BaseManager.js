import { Collection } from '../util/mod.js';
export class BaseManager {
    constructor(client) {
        Object.defineProperty(this, "client", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: client
        });
        Object.defineProperty(this, "cache", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Collection()
        });
    }
    _add(raw) {
        if (!this.holds)
            throw new Error('No "holds" exists.');
        const obj = new this.holds(this.client, raw);
        this.cache.set(obj.id, obj);
        return obj;
    }
    _remove(id) {
        this.cache.delete(id);
    }
    resolve(resolvable) {
        const id = this.resolveId(resolvable);
        if (id)
            return this.cache.get(id) ?? null;
        return null;
    }
    resolveId(resolvable) {
        if (resolvable == null)
            return null;
        if (typeof resolvable === 'string')
            return resolvable;
        if (this.holds && resolvable instanceof this.holds)
            return resolvable.id;
        const raw = resolvable;
        if (typeof raw === 'object' && '_id' in raw)
            raw._id ?? null;
        return null;
    }
    valueOf() {
        return this.cache;
    }
}
