import { BaseManager } from './BaseManager.js';
import { TypeError } from '../errors/mod.js';
import { Role } from '../structures/mod.js';
export class RoleManager extends BaseManager {
    constructor(server) {
        super(server.client);
        Object.defineProperty(this, "server", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: server
        });
        Object.defineProperty(this, "holds", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: Role
        });
    }
    _add(data) {
        const role = new Role(this.server, data);
        this.cache.set(role.id, role);
        return role;
    }
    async create(name) {
        const { id, role } = await this.client.api.post(`/servers/${this.server.id}/roles`, { body: { name } });
        return this._add(Object.assign(role, { id }));
    }
    async delete(role) {
        const id = this.resolveId(role);
        if (!id)
            throw new TypeError('INVALID_TYPE', 'role', 'RoleResolvable');
        await this.client.api.delete(`/servers/${this.server.id}/roles/${id}`);
    }
}
