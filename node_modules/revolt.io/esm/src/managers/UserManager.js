import { BaseManager } from './BaseManager.js';
import { TypeError } from '../errors/mod.js';
import { Message, User } from '../structures/mod.js';
export class UserManager extends BaseManager {
    constructor() {
        super(...arguments);
        Object.defineProperty(this, "holds", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: User
        });
    }
    async fetch(user, { force = true } = {}) {
        const id = this.resolveId(user);
        if (!id)
            throw new TypeError('INVALID_TYPE', 'user', 'UserResolvable');
        if (!force) {
            const user = this.cache.get(id);
            if (user)
                return user;
        }
        const data = await this.client.api.get(`/users/${id}`);
        return this._add(data);
    }
    resolve(resolvable) {
        if (resolvable instanceof Message)
            return resolvable.author;
        return super.resolve(resolvable);
    }
    resolveId(resolvable) {
        if (resolvable instanceof Message)
            return resolvable.authorId;
        return super.resolveId(resolvable);
    }
}
