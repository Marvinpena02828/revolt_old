import { TypeError } from '../errors/mod.js';
import { Collection } from '../util/mod.js';
export class Mentions {
    constructor(message, _users) {
        Object.defineProperty(this, "message", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: message
        });
        Object.defineProperty(this, "_users", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: _users
        });
        Object.defineProperty(this, "client", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.client = message.client;
    }
    has(user) {
        const id = this.client.users.resolveId(user);
        if (!id)
            throw new TypeError('INVALID_TYPE', 'user', 'UserResolvable');
        return this._users.includes(id);
    }
    get members() {
        const server = this.message.server;
        if (!server)
            return null;
        const members = new Collection();
        for (const userId of this._users) {
            const member = server.members.cache.get(userId);
            if (member)
                members.set(member.id, member);
        }
        return members;
    }
    get users() {
        const users = new Collection();
        for (const userId of this._users) {
            const user = this.client.users.cache.get(userId);
            if (user)
                users.set(user.id, user);
        }
        return users;
    }
}
