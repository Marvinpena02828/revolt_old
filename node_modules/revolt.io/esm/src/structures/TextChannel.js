import { ServerChannel } from './mod.js';
import { MessageManager, } from '../managers/mod.js';
import { ChannelTypes } from '../util/mod.js';
export class TextChannel extends ServerChannel {
    constructor(client, data) {
        super(client, data);
        Object.defineProperty(this, "lastMessageId", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: null
        });
        Object.defineProperty(this, "messages", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new MessageManager(this)
        });
        Object.defineProperty(this, "type", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: ChannelTypes.TEXT
        });
        this._patch(data);
    }
    _patch(data) {
        super._patch(data);
        if (data.last_message_id)
            this.lastMessageId = data.last_message_id;
        return this;
    }
    get lastMessage() {
        if (!this.lastMessageId)
            return null;
        return this.messages.cache.get(this.lastMessageId) ?? null;
    }
    send(options) {
        return this.messages.send(options);
    }
    bulkDelete(messages) {
        return this.messages.bulkDelete(messages);
    }
}
